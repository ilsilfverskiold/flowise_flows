{
  "name": "safron_keywords",
  "description": "Fetch the top and trending keywords within the tech industry for specified time periods for a category or search. \n\nYou can set either category OR search for a keyword, but only use one. If you set category you get all keywords within this category or you set search and then you get only the keywords that have been found via search. ",
  "color": "linear-gradient(rgb(36,7,233), rgb(63,55,121))",
  "iconSrc": "",
  "schema": "[{\"id\":0,\"property\":\"period\",\"description\":\"The period for which you want to fetch keyword data (e.g., \\\"daily\\\", \\\"weekly\\\", \\\"monthly\\\", \\\"quarterly\\\"). Example: \\\"daily\\\", \\\"weekly\\\", etc.\",\"type\":\"string\",\"required\":true},{\"id\":1,\"property\":\"category\",\"description\":\"The category of keywords (choose between: \\\"subjects\\\", \\\"frameworks\\\", \\\"languages\\\", \\\"concepts\\\", \\\"hardware\\\", \\\"websites\\\", \\\"people\\\", \\\"platforms\\\", \\\"companies\\\", \\\"ai\\\", \\\"tools\\\", etc.). This helps in narrowing down the results to specific types of keywords.\",\"type\":\"string\",\"required\":false},{\"id\":2,\"property\":\"sort\",\"description\":\"Sort order of the results. It can be \\\"trending\\\" (default), \\\"top\\\", \\\"alphabetical-a\\\", or \\\"alphabetical-z\\\". Example: \\\"trending\\\", \\\"top\\\"\",\"type\":\"string\",\"required\":false},{\"id\":3,\"property\":\"search\",\"description\":\"search for a specific keyword to get statistics for a period. Example: \\\"Elon Musk\\\"\",\"type\":\"string\",\"required\":false}]",
  "func": "const fetch = require('node-fetch');\n\n// Define the API endpoint\nconst apiUrl = 'https://public.api.safron.io/v2/keywords';\n\n// Manually construct the query string\nlet queryParams = `period=${$period}`;\n\n// Optional parameters\nif ($search) {\n    queryParams += `&search=${$search}`;\n} else if ($category) {\n    queryParams += `&category=${$category}`;\n}\n\nif ($sort) queryParams += `&sort=${$sort}`;\n\n// Construct the full URL with query parameters\nconst url = `${apiUrl}?${queryParams}&limit=15`;\n\ntry {\n    // Make the API request\n    console.log(url);\n    const response = await fetch(url, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n    });\n\n    // Check if the response is OK (status code 200)\n    if (!response.ok) {\n        throw new Error('Failed to fetch trending keywords, url: ' + url);\n    }\n\n    // Parse the response JSON\n    const result = await response.json();\n\n    // Return the fetched keywords\n    return JSON.stringify(result);\n} catch (error) {\n    console.error('Error fetching keywords:', error);\n    return `Error: ${error.message}`;\n}"
}